<html>

<head>
    <style>
        .cell {
            display: inline-block;
            border: 1px solid #b0b0b0;
            background: #eee;
            width: 20px;
            height: 20px;
            margin: 1;
        }

        .cell.fig {
            background-color: #088;
        }

        .cell.fig.center {
            background-color: #aa0;
        }
    </style>
</head>

<body>
    <div style="display: flex;justify-content: center;">
        <div id="board">
        </div>
        <button id="add-view">add</button>
    </div>

    <script>
        const boardWidth = 4;
        const boardHeight = 4;

        const boardEl = document.getElementById('board');

        let fx = 1;
        let fy = 1;

        createBoard();
        setClass(fx, fy, 'fig center')


        let figures = [];


        boardEl.addEventListener('click', e => {
            if (e.target.className === 'cell fig') e.target.className = 'cell';
            else if (e.target.className === 'cell') e.target.className = 'cell fig';
        })

        document.getElementById('add-view').addEventListener('click', () => {
            const fig = [{ x: 0, y: 0 }];
            for (let y = 0; y < boardHeight; y++) {
                for (let x = 0; x < boardWidth; x++) {
                    if (boardEl.querySelectorAll('.cell')[y * boardWidth + x].className == 'cell fig') {
                        fig.push({ x: x - fx, y: y - fy });
                    }
                }
            }
            figures.push(fig);
            console.log(JSON.stringify(figures));
        })



        function setClass(x, y, className) {
            boardEl.querySelectorAll('.cell')[y * boardWidth + x].className = 'cell ' + className;
        }

        function createBoard() {
            let s = '';
            for (let y = 0; y < boardHeight; y++) {
                for (let x = 0; x < boardWidth; x++) {
                    s += `<div class='cell'></div>`
                }
                s += "<br/>"
            }
            boardEl.innerHTML = s;
        }
    </script>
</body>

</html>